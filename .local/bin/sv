#!/bin/bash

DOCKER_USER="stellvia"
DOCKER_SCRIPT="--login"

if [ $# == 1 ]; then
  DOCKER_USER=$1
fi

if [  $# == 2 ]; then
  DOCKER_USER=$1
  DOCKER_SCRIPT=$2
fi

docker container run \
  --net=stellvia \
  -v $HOME/.ssh:/home/stellvia/.ssh \
  -v $HOME/.gnupg:/home/stellvia/.gnupg \
  -v $HOME/.gitconfig.user:/home/stellvia/.gitconfig.user:ro \
  -v package:/home/stellvia/package \
  -v develop:/home/stellvia/dev \
  -v local:/home/stellvia/.local \
  -w /home/stellvia \
  -it --rm \
  -e TZ=Asia/Tokyo \
  -e TERM=xterm-256color \
  -e IS_DOCKER=true \
  --user $DOCKER_USER \
  --name stellvia \
  --hostname foundationII \
  stellvia/stellvia:latest \
  /bin/bash $DOCKER_SCRIPT
